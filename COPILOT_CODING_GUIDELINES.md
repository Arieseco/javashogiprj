# GitHub Copilot 用 コーディング規約（提案）

目的
- このドキュメントは、GitHub Copilot による自動生成・提案がリポジトリ方針に従うためのガイドラインです。
- 人間のコントリビュータもこの規約に合わせてください。

適用範囲
- このリポジトリ内のすべてのソースコード（主に Java）。

基本ルール
- エンコーディング: UTF-8（BOM 無し）。
- 改行: LF を推奨（Windows 環境では CRLF でも可だが一貫性を保つ）。
- インデント: スペース 4 つ。
- 1 行の最大長: 120 文字を目安。
- 既存のスタイルに合わせる。スタイルが未定義の場合は Google Java Style を準拠。

ネストとインデントの制限
- 1つのメソッドにつきインデントは原則として「1段階まで」にすること。深いネストが必要な場合は早期リターンやヘルパーメソッドに切り出して可読性を保つ。


命名規則（Java）
- クラス名/インタフェース名: PascalCase。
- メソッド/変数: camelCase。
- 定数: UPPER_SNAKE_CASE。
- パッケージ名: 全て小文字。
- 変数名は意味のある英語を用いる。1 文字変数はループカウンタ等の限定用途のみ可。

インポートと依存
- ワイルドカード import（`import java.util.*`）は禁止。
- 新しい外部ライブラリを追加する前に必ず相談する（セキュリティ/ライセンス確認）。

コメントとドキュメンテーション
- public API には Javadoc を追加。
- 複雑なロジックには短い説明コメントを入れる。
- TODO は `TODO(username): 説明` の形式で残す。

フォーマッティングと自動整形
- `google-java-format` またはプロジェクトで指定したフォーマッタに従う。
- Copilot がコードを生成する場合、生成後に自動整形を実行してから提案すること。

エラー処理
- 汎用的な `catch (Exception e)` は避け、具体的な例外をキャッチする。
- ロギングは `System.out`/`System.err` ではなくロガー（`java.util.logging` / `slf4j` 等）を使う。

テスト
- 変更には可能な限りユニットテスト（JUnit 等）を追加。
- 新しい機能はテストでカバレッジを作る。

セキュリティと機密情報
- API キーやパスワードなどの秘密情報をコードに直書きしない。
- 機密情報を検出した場合は提案しない（または検出すると警告を出す）。

変更の範囲と最小化
- 提案は最小の変更で済むようにする（既存の API や挙動を壊さない）。
- 余計なファイル変更（ビルド成果物、`out/` 等）は含めない。

可読性と説明責任
- 生成コードには簡潔な説明コメントを付ける（なぜその実装か）。
- 生成するコミットメッセージ候補は短く（50 文字以内）かつ説明的にする。

依頼に対する振る舞い
- 要件が曖昧な場合は代案を 2-3 個示し、確定前に質問してから実装する。
- 破壊的変更や API 互換を壊す変更は、明示的な承認を求める。

ライセンスと著作権
- 外部コードを挿入する場合はライセンスを明示して利用可能か確認する（無断で長文を挿入しない）。

開発ワークフロー遵守
- 小さな PR を作成する（1 PR = 1 意図）。
- PR には変更点の概要・影響範囲・テスト手順を記載。

チェックリスト（Copilot 提案時）
- [ ] UTF-8（BOM 無し）である
- [ ] プロジェクトのフォーマットルールに従っている
- [ ] ワイルドカード import を使っていない
- [ ] 例外処理が適切である
- [ ] ログをロガーで出力している
- [ ] 機密情報が含まれていない
- [ ] ユニットテストが追加されている（必要な場合）
- [ ] 既存コードの動作を壊さない

付録: 推奨ツール
- `google-java-format` — Java コード整形
- `SpotBugs` / `Checkstyle` — 静的解析
- `EditorConfig` — 基本のインデント・改行ルールの共有

--
このファイルは初版です。追加で優先順位、細かいスタイル（ブレースの位置など）や、プロジェクト固有のルールを入れたい場合は指示してください。
